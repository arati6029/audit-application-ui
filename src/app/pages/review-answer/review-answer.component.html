<div class="page-header">
  <h1>Review Answers</h1>
</div>
<div
  class="review-answers-container"
  nz-space
  nzDirection="vertical"
  nzSize="large"
>
  <!-- Auditor Selection -->
  <form nz-form nzLayout="horizontal">
    <nz-form-item>
      <nz-form-label [nzSpan]="6" nzFor="auditor">Select Auditor</nz-form-label>
      <nz-form-control [nzSpan]="16" style="padding-left: 12px">
        <nz-select
          id="auditor"
          nzPlaceHolder="Select Auditor"
          [(ngModel)]="selectedAuditorId"
          name="auditor"
          (ngModelChange)="onAuditorChange($event)"
          style="width: 100%; min-width: 360px; max-width: 800px"
        >
          <nz-option
            *ngFor="let auditor of auditors"
            [nzValue]="auditor.userId"
            [nzLabel]="auditor.name"
          >
          </nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
  </form>
</div>
<!-- Review Table -->
<div style="margin-top: 50px">
  <nz-table
    *ngIf="answers.length > 0"
    [nzData]="answers"
    [nzBordered]="true"
    nzSize="middle"
    width="100%"
  >
    <thead>
      <tr>
        <th style="width: 60px">Sr No</th>
        <th>Question</th>
        <th>Answer</th>
        <th style="width: 180px">Action</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let ans of answers; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ ans.assignment.question.questionText }}</td>
        <td>{{ ans.answerText }}</td>
        <td>
          <!-- Accept Button -->
          <button
            nz-button
            nzSize="small"
            nzShape="round"
            (click)="acceptAnswer(ans)"
            [nzType]="
              ans.assignment?.status === 'ACCEPTED' ? 'primary' : 'default'
            "
            [ngStyle]="{
              'background-color':
                ans.assignment?.status === 'ACCEPTED' ? 'green' : '',
              color: ans.assignment?.status === 'ACCEPTED' ? 'white' : ''
            }"
          >
            Accept
          </button>

          &nbsp;

          <!-- Reject Button -->
          <button
            nz-button
            nzSize="small"
            nzShape="round"
            (click)="rejectAnswer(ans)"
            [nzType]="
              ans.assignment?.status === 'REJECTED' ? 'primary' : 'default'
            "
            [nzDanger]="ans.assignment?.status === 'REJECTED'"
            [ngStyle]="{
              'background-color':
                ans.assignment?.status === 'REJECTED' ? 'red' : '',
              color: ans.assignment?.status === 'REJECTED' ? 'white' : ''
            }"
          >
            Reject
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>

<!-- No Data Message -->
<div *ngIf="selectedAuditorId && answers.length === 0" class="no-data">
  No answers found for this auditor.
</div>
<!-- </div> -->
